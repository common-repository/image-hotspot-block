!function(){"use strict";var t,e,o,r,n,c,i,a,u,l,s,d,f,p,b,h,y,g,v,m,w,x,k,O,P,j,S,_,I,E,D,F,C,N,z,M,T,R,A,L,W,q,G,K,H,B,J,U={7418:function(t){var e=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function n(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},o=0;o<10;o++)e["_"+String.fromCharCode(o)]=o;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(t){r[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(t){return!1}}()?Object.assign:function(t,c){for(var i,a,u=n(t),l=1;l<arguments.length;l++){for(var s in i=Object(arguments[l]))o.call(i,s)&&(u[s]=i[s]);if(e){a=e(i);for(var d=0;d<a.length;d++)r.call(i,a[d])&&(u[a[d]]=i[a[d]])}}return u}},5251:function(t,e,o){o(7418);var r=o(9196),n=60103;if("function"==typeof Symbol&&Symbol.for){var c=Symbol.for;n=c("react.element"),c("react.fragment")}var i=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a=Object.prototype.hasOwnProperty,u={key:!0,ref:!0,__self:!0,__source:!0};function l(t,e,o){var r,c={},l=null,s=null;for(r in void 0!==o&&(l=""+o),void 0!==e.key&&(l=""+e.key),void 0!==e.ref&&(s=e.ref),e)a.call(e,r)&&!u.hasOwnProperty(r)&&(c[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps)void 0===c[r]&&(c[r]=e[r]);return{$$typeof:n,type:t,key:l,ref:s,props:c,_owner:i.current}}e.jsx=l,e.jsxs=l},5893:function(t,e,o){t.exports=o(5251)},9196:function(t){t.exports=window.React}},Y={};function $(t){var e=Y[t];if(void 0!==e)return e.exports;var o=Y[t]={exports:{}};return U[t](o,o.exports,$),o.exports}$.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return $.d(e,{a:e}),e},$.d=function(t,e){for(var o in e)$.o(e,o)&&!$.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},$.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},t=window.wp.element,$(9196),e=window.ReactDOM,o=$.n(e),r=$(5893),n=window.wp.apiFetch,c=$.n(n),i=function(t,e,o,r){return new(o||(o=Promise))((function(n,c){function i(t){try{u(r.next(t))}catch(t){c(t)}}function a(t){try{u(r.throw(t))}catch(t){c(t)}}function u(t){var e;t.done?n(t.value):(e=t.value,e instanceof o?e:new o((function(t){t(e)}))).then(i,a)}u((r=r.apply(t,e||[])).next())}))},a=function(t,e){var o,r,n,c,i={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return c={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function a(a){return function(u){return function(a){if(o)throw new TypeError("Generator is already executing.");for(;c&&(c=0,a[0]&&(i=0)),i;)try{if(o=1,r&&(n=2&a[0]?r.return:a[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,a[1])).done)return n;switch(r=0,n&&(a=[2&a[0],n.value]),a[0]){case 0:case 1:n=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((n=(n=i.trys).length>0&&n[n.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!n||a[1]>n[0]&&a[1]<n[3])){i.label=a[1];break}if(6===a[0]&&i.label<n[1]){i.label=n[1],n=a;break}if(n&&i.label<n[2]){i.label=n[2],i.ops.push(a);break}n[2]&&i.ops.pop(),i.trys.pop();continue}a=e.call(t,i)}catch(t){a=[6,t],r=0}finally{o=n=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},u=function(t,e,o,r){return new(o||(o=Promise))((function(n,c){function i(t){try{u(r.next(t))}catch(t){c(t)}}function a(t){try{u(r.throw(t))}catch(t){c(t)}}function u(t){var e;t.done?n(t.value):(e=t.value,e instanceof o?e:new o((function(t){t(e)}))).then(i,a)}u((r=r.apply(t,e||[])).next())}))},l=function(t,e){var o,r,n,c,i={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return c={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function a(a){return function(u){return function(a){if(o)throw new TypeError("Generator is already executing.");for(;c&&(c=0,a[0]&&(i=0)),i;)try{if(o=1,r&&(n=2&a[0]?r.return:a[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,a[1])).done)return n;switch(r=0,n&&(a=[2&a[0],n.value]),a[0]){case 0:case 1:n=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((n=(n=i.trys).length>0&&n[n.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!n||a[1]>n[0]&&a[1]<n[3])){i.label=a[1];break}if(6===a[0]&&i.label<n[1]){i.label=n[1],n=a;break}if(n&&i.label<n[2]){i.label=n[2],i.ops.push(a);break}n[2]&&i.ops.pop(),i.trys.pop();continue}a=e.call(t,i)}catch(t){a=[6,t],r=0}finally{o=n=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},s=function(t,e){return u(void 0,void 0,void 0,(function(){return l(this,(function(o){switch(o.label){case 0:return[4,c()({path:"/wp/v2/media/".concat(t),method:"GET"})];case 1:return[2,o.sent().media_details.sizes[e].source_url]}}))}))},d=function(){var e=(0,t.useRef)(!0);return(0,t.useEffect)((function(){e.current=!1}),[]),e.current},f={position:{x:50,y:50},wcProduct:{productId:null,productName:"",productPermalink:"",productShortDescription:"",productFeaturedImage:{id:void 0,url:"",size:"large"},productStockStatus:"",productPrice:""},customProduct:{productName:"",productPermalink:"",productShortDescription:"",productFeaturedImage:{id:void 0,url:"",size:"large"},productPrice:""},tooltip:{direction:"row",style:{position:"top",layout:"horizontal",width:"360px",height:"auto",background:{hex:"#fff",rgb:{r:255,g:255,b:255,a:1}},triangle:!0},containers:[{type:"container",style:{gridSize:"140px",padding:{left:0,top:0,right:0,bottom:0}},blocks:[{type:"media",source:"productFeaturedImage",options:{size:"large"},style:{backgroundPosition:"center"}}]},{type:"container",style:{gridSize:"1fr",padding:{left:16,top:16,right:16,bottom:16}},blocks:[{type:"text",source:"productName",options:{},style:{color:{hex:"#000",rgb:{r:0,g:0,b:0,a:1}},fontSize:24,fontWeight:600,margin:{left:0,top:8,right:0,bottom:8}}},{type:"text",source:"productShortDescription",options:{},style:{color:{hex:"#000",rgb:{r:0,g:0,b:0,a:1}},fontSize:16,fontWeight:300,margin:{left:0,top:8,right:0,bottom:8}}},{type:"text",source:"productPrice",options:{},style:{color:{hex:"#000",rgb:{r:0,g:0,b:0,a:1}},fontSize:16,fontWeight:300,margin:{left:0,top:8,right:0,bottom:8}}}]}]},style:{pulsating:"always",opacity:1,background:{hex:"#d9e3f0",rgb:{r:217,g:227,b:240,a:1}},size:"16px",borderWidth:"1px",borderColor:{hex:"#fff",rgb:{r:255,g:255,b:255,a:1}}}},p=function(){return p=Object.assign||function(t){for(var e,o=1,r=arguments.length;o<r;o++)for(var n in e=arguments[o])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},p.apply(this,arguments)},b=function(t,e,o){if(o||2===arguments.length)for(var r,n=0,c=e.length;n<c;n++)!r&&n in e||(r||(r=Array.prototype.slice.call(e,0,n)),r[n]=e[n]);return t.concat(r||Array.prototype.slice.call(e))},h=(0,t.createContext)(null),y=function(){var e=(0,t.useContext)(h);if(!e)throw new Error("null useDotsContext");return e},g=function(e){var o=(0,t.useState)(null),n=o[0],c=o[1],i=(0,t.useState)(null),a=i[0],u=i[1];return(0,r.jsx)(h.Provider,p({value:{dots:e.dots,focusedDot:n,dotSelected:a,editMode:e.editMode,setDotPosition:function(t,o){var r=b([],e.dots,!0);r[t].position=o,e.setAttributes({dots:r})},addDot:function(){var t=JSON.parse(JSON.stringify(f));!function(t){for(var o=50,r=!1,n=function(){var n=!1;e.dots.forEach((function(t){t.position.y===o&&(n=!0)})),n?o+=5:(r=!0,t.position.y=o)};!r;)n()}(t),e.setAttributes({dots:e.dots.concat([t])})},removeDot:function(t){var o=b([],e.dots,!0);o.splice(t,1),e.setAttributes({dots:o})},setDots:function(t){e.setAttributes({dots:t})},setFocusedDot:c,setDotSelected:u}},{children:e.children}))},window.wp.data,v=(0,t.createContext)(null),m=function(){return m=Object.assign||function(t){for(var e,o=1,r=arguments.length;o<r;o++)for(var n in e=arguments[o])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},m.apply(this,arguments)},w=function(t,e,o,r){return new(o||(o=Promise))((function(n,c){function i(t){try{u(r.next(t))}catch(t){c(t)}}function a(t){try{u(r.throw(t))}catch(t){c(t)}}function u(t){var e;t.done?n(t.value):(e=t.value,e instanceof o?e:new o((function(t){t(e)}))).then(i,a)}u((r=r.apply(t,e||[])).next())}))},x=function(t,e){var o,r,n,c,i={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return c={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function a(a){return function(u){return function(a){if(o)throw new TypeError("Generator is already executing.");for(;c&&(c=0,a[0]&&(i=0)),i;)try{if(o=1,r&&(n=2&a[0]?r.return:a[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,a[1])).done)return n;switch(r=0,n&&(a=[2&a[0],n.value]),a[0]){case 0:case 1:n=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((n=(n=i.trys).length>0&&n[n.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!n||a[1]>n[0]&&a[1]<n[3])){i.label=a[1];break}if(6===a[0]&&i.label<n[1]){i.label=n[1],n=a;break}if(n&&i.label<n[2]){i.label=n[2],i.ops.push(a);break}n[2]&&i.ops.pop(),i.trys.pop();continue}a=e.call(t,i)}catch(t){a=[6,t],r=0}finally{o=n=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},k=function(t,e,o){if(o||2===arguments.length)for(var r,n=0,c=e.length;n<c;n++)!r&&n in e||(r||(r=Array.prototype.slice.call(e,0,n)),r[n]=e[n]);return t.concat(r||Array.prototype.slice.call(e))},O=(0,t.createContext)(null),P=function(){var e=(0,t.useContext)(O);if(!e)throw new Error("null useDotContext");return e},j=function(e){var o=d(),n=y(),u=n.editMode,l=n.dots,f=n.focusedDot,p=n.setDots,b=n.setDotSelected;if(u){var h=function(){var e=(0,t.useContext)(v);if(!e)throw new Error("WcProductsContext is null");return e}().wcProducts;(0,t.useEffect)((function(){w(void 0,void 0,void 0,(function(){var t,r;return x(this,(function(n){switch(n.label){case 0:return o||void 0===e.dot.customProduct.productFeaturedImage.id?[3,2]:(t=m({},e.dot),[4,s(e.dot.customProduct.productFeaturedImage.id,e.dot.customProduct.productFeaturedImage.size)]);case 1:r=n.sent(),t.customProduct.productFeaturedImage.url=r,g(t),n.label=2;case 2:return[2]}}))}))}),[e.dot.customProduct.productFeaturedImage.id]),(0,t.useEffect)((function(){w(void 0,void 0,void 0,(function(){return x(this,(function(t){switch(t.label){case 0:return!e.dot.wcProduct.productId||o?[3,2]:[4,w(void 0,void 0,void 0,(function(){var t,o,r,n;return x(this,(function(u){switch(u.label){case 0:return t=m({},e.dot),h&&t.wcProduct.productId&&(o=h.filter((function(e){return e.id===t.wcProduct.productId})))?(t.wcProduct.productName=o[0].title.rendered,t.wcProduct.productFeaturedImage.id=o[0].featured_media,[4,(l=t.wcProduct.productId,i(void 0,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return[4,c()({path:"/wc/v3/products/".concat(l),method:"GET"})];case 1:return[2,t.sent()]}}))})))]):[3,4];case 1:return r=u.sent(),t.wcProduct.productPrice=r.price_html,t.wcProduct.productStockStatus=r.stock_status,t.wcProduct.productShortDescription=r.short_description,t.wcProduct.productFeaturedImage.id?[4,s(t.wcProduct.productFeaturedImage.id,t.wcProduct.productFeaturedImage.size)]:[3,3];case 2:n=u.sent(),t.wcProduct.productFeaturedImage.url=n,u.label=3;case 3:g(t),u.label=4;case 4:return[2]}var l}))}))];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}),[e.dot.wcProduct.productId])}var g=function(t){var o=k([],l,!0);o[e.index]=t,p(o)};return(0,r.jsx)(O.Provider,m({value:{dot:e.dot,index:e.index,product:e.dot.wcProduct.productId?m({},e.dot.wcProduct):m({},e.dot.customProduct),isFocusedDot:function(){return f===e.index},setDot:g,setDotStyle:function(t,o){var r=m({},e.dot);r.style[t]=o,g(r)},setDotSelected:b,setDotTooltip:function(t){var o=m({},e.dot);o.tooltip=t,g(o)},setCustomProductFeaturedImage:function(t){var o=m({},e.dot);o.customProduct.productFeaturedImage.id=t,g(o)},setDotCustomProductKey:function(t,o){var r=m({},e.dot);r.customProduct[t]=o,g(r)}}},{children:e.children}))},S=function(){return S=Object.assign||function(t){for(var e,o=1,r=arguments.length;o<r;o++)for(var n in e=arguments[o])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},S.apply(this,arguments)},_=function(t,e){var o={};return o["".concat(e,"Top")]=t.top,o["".concat(e,"Bottom")]=t.bottom,o["".concat(e,"Left")]=t.left,o["".concat(e,"Right")]=t.right,o},I=function(t){var e=S({},t);if(Object.hasOwn(e,"margin")){var o=_(e.margin,"margin");delete e.margin,e=S(S({},e),o)}if(Object.hasOwn(e,"padding")){var r=_(e.padding,"padding");delete e.padding,e=S(S({},e),r)}if(Object.hasOwn(e,"color")&&e.color.rgb){var n=S({},e.color);delete e.color,e.color="rgba(".concat(n.rgb.r,", ").concat(n.rgb.g,", ").concat(n.rgb.b,", ").concat(n.rgb.a,")")}return e},E=function(){return E=Object.assign||function(t){for(var e,o=1,r=arguments.length;o<r;o++)for(var n in e=arguments[o])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},E.apply(this,arguments)},D=function(t,e,o){var n=P(),c=n.dot,i=n.product;if(!c.tooltip)return!1;if("text"===t)return(0,r.jsx)("div",{className:"tooltip-container__block__text",dangerouslySetInnerHTML:{__html:i[e]}});if("media"===t){var a=E({},o);return"productFeaturedImage"===e&&(a=E({backgroundImage:"url(".concat(i.productFeaturedImage.url,")")},o)),(0,r.jsx)("div",{className:"tooltip-container__block__media",style:a})}},F=function(t){return D(t.block.type,t.block.source,t.block.style)?(0,r.jsx)("div",E({className:"tooltip-container__block tooltip-container__block--".concat(t.block.type," tooltip-container__block--").concat(t.block.source),style:I(t.block.style)},{children:D(t.block.type,t.block.source,t.block.style)})):null},C=function(){return C=Object.assign||function(t){for(var e,o=1,r=arguments.length;o<r;o++)for(var n in e=arguments[o])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},C.apply(this,arguments)},N=function(t){return(0,r.jsx)("div",C({className:"tooltip-container",style:I(t.style)},{children:t.blocks.map((function(t,e){return(0,r.jsx)(F,{block:t},e)}))}))},z=function(){return z=Object.assign||function(t){for(var e,o=1,r=arguments.length;o<r;o++)for(var n in e=arguments[o])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},z.apply(this,arguments)},M=function(){var t=P().dot;return(0,r.jsx)("div",z({style:function(){var e={};if("row"===t.tooltip.direction){var o="";t.tooltip.containers.forEach((function(t){o+=" ".concat(t.style.gridSize)})),e["grid-template-columns"]=o}if("column"===t.tooltip.direction){var r="";t.tooltip.containers.forEach((function(t){r+=" ".concat(t.style.gridSize)})),e["grid-template-rows"]=r}return z(z({},{display:"grid",alignItems:"stretch",height:"100%",width:"100%",borderRadius:"8px",overflow:"hidden"}),e)}()},{children:t.tooltip.containers.map((function(t,e){return(0,r.jsx)(N,{blocks:t.blocks,style:t.style},e)}))}))},T=function(){return T=Object.assign||function(t){for(var e,o=1,r=arguments.length;o<r;o++)for(var n in e=arguments[o])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},T.apply(this,arguments)},R=function(){var e,o=P(),n=o.dot,c=o.product,i=o.isFocusedDot,a=y().editMode,u=(0,t.useRef)(null),l=(0,t.useState)(0),s=l[0],d=l[1],f=(0,t.useState)(0),p=f[0],b=f[1],h=(0,t.useState)(!1),g=h[0],v=h[1];return(0,t.useEffect)((function(){s&&p&&v(!0)}),[p,s]),(0,t.useEffect)((function(){u.current&&(d(u.current.offsetHeight),b(u.current.offsetWidth))}),[i,n,n.tooltip.style.position]),(0,r.jsx)("div",T({className:"dot__tooltip ".concat(g?"visible":""," ").concat(n.tooltip.direction," ").concat(n.tooltip.style.triangle?"triangle":""," ").concat(null!==(e=n.tooltip.style.position)&&void 0!==e?e:"top"),ref:u,style:function(t){if(n.tooltip.style){var e=null!=t?t:{};for(var o in n.tooltip.style)e["--tooltip-".concat(o)]=n.tooltip.style[o],"background"===o&&(e["--tooltip-".concat(o)]="rgba(".concat(n.tooltip.style.background.rgb.r,",").concat(n.tooltip.style.background.rgb.g,", ").concat(n.tooltip.style.background.rgb.b,", ").concat(n.tooltip.style.background.rgb.a,")"));return e}}({"--tooltip-actual-height":"".concat(s,"px"),"--tooltip-actual-width":"".concat(p,"px"),direction:n.tooltip.direction}),onClick:function(){!a&&c.productPermalink&&(window.location.href=c.productPermalink)}},{children:(0,r.jsx)(M,{})}))},A=function(){return A=Object.assign||function(t){for(var e,o=1,r=arguments.length;o<r;o++)for(var n in e=arguments[o])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},A.apply(this,arguments)},L=function(){var t=P(),e=t.dot,o=t.index,n=t.isFocusedDot,c=y(),i=c.editMode,a=c.setFocusedDot,u=c.setDotSelected;return(0,r.jsx)("div",A({className:"dot ".concat("pulsating pulsating--".concat(e.style.pulsating)," ").concat(n()?"focused":""),style:function(){if(e.style){var t={};for(var o in e.style)"background"===o||"borderColor"===o?(t["--dot-".concat(o)]="rgba(".concat(e.style[o].rgb.r,", ").concat(e.style[o].rgb.g,", ").concat(e.style[o].rgb.b,", ").concat(e.style[o].rgb.a,")"),t["--dot-color_r"]=e.style.background.rgb.r,t["--dot-color_g"]=e.style.background.rgb.g,t["--dot-color_b"]=e.style.background.rgb.b):t["--dot-".concat(o)]=e.style[o];return t["--dot-pos-x"]=e.position.x+"%",t["--dot-pos-y"]=e.position.y+"%",t}}(),onMouseDown:function(){return u(o)},onMouseUp:function(){return u(null)},onClick:function(t){(!i||t.metaKey||t.ctrlKey)&&i||a(o)}},{children:(0,r.jsx)(R,{})}))},W=function(){return W=Object.assign||function(t){for(var e,o=1,r=arguments.length;o<r;o++)for(var n in e=arguments[o])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},W.apply(this,arguments)},q=function(t,e,o,r){return new(o||(o=Promise))((function(n,c){function i(t){try{u(r.next(t))}catch(t){c(t)}}function a(t){try{u(r.throw(t))}catch(t){c(t)}}function u(t){var e;t.done?n(t.value):(e=t.value,e instanceof o?e:new o((function(t){t(e)}))).then(i,a)}u((r=r.apply(t,e||[])).next())}))},G=function(t,e){var o,r,n,c,i={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return c={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function a(a){return function(u){return function(a){if(o)throw new TypeError("Generator is already executing.");for(;c&&(c=0,a[0]&&(i=0)),i;)try{if(o=1,r&&(n=2&a[0]?r.return:a[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,a[1])).done)return n;switch(r=0,n&&(a=[2&a[0],n.value]),a[0]){case 0:case 1:n=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((n=(n=i.trys).length>0&&n[n.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!n||a[1]>n[0]&&a[1]<n[3])){i.label=a[1];break}if(6===a[0]&&i.label<n[1]){i.label=n[1],n=a;break}if(n&&i.label<n[2]){i.label=n[2],i.ops.push(a);break}n[2]&&i.ops.pop(),i.trys.pop();continue}a=e.call(t,i)}catch(t){a=[6,t],r=0}finally{o=n=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},K=(0,t.createContext)(null),H=function(e){var o=function(t,o){var r=W({},e.mainImage);r[t]=o,e.setAttributes({mainImage:r})},n=d();(0,t.useEffect)((function(){n||c()}),[e.mainImage.id,e.mainImage.size]);var c=function(){return q(void 0,void 0,void 0,(function(){var t;return G(this,(function(r){switch(r.label){case 0:return e.mainImage.id?[4,s(e.mainImage.id,e.mainImage.size)]:[3,2];case 1:t=r.sent(),o("url",t),r.label=2;case 2:return[2]}}))}))};return(0,r.jsx)(K.Provider,W({value:{mainImage:e.mainImage,setMainImage:o}},{children:e.children}))},B=function(){return B=Object.assign||function(t){for(var e,o=1,r=arguments.length;o<r;o++)for(var n in e=arguments[o])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},B.apply(this,arguments)},J=function(){var e=function(){var e=(0,t.useContext)(K);if(!e)throw new Error("MainImageContext is null");return e}().mainImage,o=y(),n=o.dots,c=o.focusedDot,i=o.editMode,a=o.dotSelected,u=o.setDotSelected,l=o.setFocusedDot,s=o.setDotPosition,d=(0,t.useState)(!1),f=d[0],p=d[1],b=(0,t.useRef)(null);(0,t.useEffect)((function(){var t=setTimeout((function(){p(!1)}),3500);return function(){clearTimeout(t)}}),[f]);var h=function(t){var e=b.current.querySelector(".dot.focused"),o=document.querySelectorAll(".dot-card");e&&(e.contains(t.target)||t.target===e||function(t){var e=!1;return o.forEach((function(o){(o.contains(t.target)||t.target===o)&&(e=!0)})),e}(t)||l(null))};return(0,t.useEffect)((function(){return document.addEventListener("click",h),function(){return document.removeEventListener("click",h)}}),[c]),(0,r.jsxs)("div",B({className:"image-hotspot",onMouseMove:function(t){return function(t){if(i&&null!==a)if(t.ctrlKey||t.metaKey){var e=b.current.getBoundingClientRect(),o=100*(t.clientX-e.left)/e.width,r=100*(t.clientY-e.top)/e.height;o>=0&&o<=100&&r>=0&&r<=100?s(a,{x:o,y:r}):u(null)}else u(null),p(!0)}(t)},ref:b},{children:[(0,r.jsx)("img",{src:e.url,style:{maxWidth:"100%"}}),n.map((function(t,e){return(0,r.jsx)(j,B({dot:t,index:e},{children:(0,r.jsx)(L,{})}),e)})),(0,r.jsx)("div",B({className:"helper-message ".concat(f?"visible":"")},{children:"Hold the ctrl or ⌘ cmd key to move a dot."}))]}))},document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelectorAll(".image-hotspot-block-container"),r=e=>(0,t.createElement)(H,{mainImage:e.mainImage},(0,t.createElement)(g,{dots:e.dots},(0,t.createElement)(J,null)));e.forEach((e=>{const n=JSON.parse(e.querySelector("pre").innerHTML);o().render((0,t.createElement)(r,n),e),e.classList.remove("image-hotspot-block-container")}))}))}();